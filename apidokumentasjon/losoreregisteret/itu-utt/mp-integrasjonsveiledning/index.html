<!DOCTYPE html>
<html lang="nb" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.98.0" />
    <meta name="description" content="Veiledning for integrasjon mot Maskinporten">


    
    <title>Veiledning for integrasjon mot Maskinporten :: BR dokumentasjon</title>
    
    <link rel="shortcut icon" href="/docs/images/favicon.png" type="image/x-icon" />
    <link href="/docs/css/nucleus.css" rel="stylesheet">
    <link href="/docs/css/font-awesome.min.css" rel="stylesheet">
    <link href="/docs/css/hybrid.css" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css" rel="stylesheet">
    <link href="/docs/css/horsey.css" rel="stylesheet">
    
    <link href="/docs/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/docs/css/bootstrap.min.css">
    <script src="/docs/js/jquery-2.x.min.js"></script>
    <style>
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>



    
<link href="/docs/css/altinn.css" rel="stylesheet">






  </head>
  <body class="" data-url="/docs/apidokumentasjon/losoreregisteret/itu-utt/mp-integrasjonsveiledning/">
    <nav id="sidebar" class="">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	<p><a href="/docs" title="BR docs"><img src="/docs/images/brreg_logo_hvit.png" alt="BR"> docs</a></p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Søk...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script src="/docs/js/lunr.min.js"></script>
<script src="/docs/js/horsey.js"></script>
<script>
    var baseurl = "https:\/\/brreg.github.io\/docs\/";
</script>
<script src="/docs/js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
        
        
          
          


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/generelt/" class="dd-item
        
        
        parent
        ">
      <a href="/docs/generelt/">
        <span>Generelt</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/generelt/om-dokumentasjonen/" class="dd-item
     
      ">
        <a href="/docs/generelt/om-dokumentasjonen/">
        <span>Om dokumentasjonen</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/generelt/kontakt-oss/" class="dd-item
     
      ">
        <a href="/docs/generelt/kontakt-oss/">
        <span>Kontakt oss</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/generelt/eksternt-testmiljo/" class="dd-item
     
      ">
        <a href="/docs/generelt/eksternt-testmiljo/">
        <span>Eksternt testmiljø</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/generelt/tilgangsstyring/" class="dd-item
     
      ">
        <a href="/docs/generelt/tilgangsstyring/">
        <span>Tilgangsstyring</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/" class="dd-item
        parent
        
        parent
        ">
      <a href="/docs/apidokumentasjon/">
        <span>API-dokumentasjon</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/elektronisk-mottak/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/elektronisk-mottak/">
        <span>Elektronisk mottak</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/elektronisk-mottak/maskinport-integrasjon/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/elektronisk-mottak/maskinport-integrasjon/">
        <span>Integrasjon direkte mot BR</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/elektronisk-mottak/maskinport-integrasjon/innsending/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/elektronisk-mottak/maskinport-integrasjon/innsending/">
        <span>Innsending av meldinger</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/elektronisk-mottak/maskinport-integrasjon/uthenting/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/elektronisk-mottak/maskinport-integrasjon/uthenting/">
        <span>Uthenting av meldinger</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/elektronisk-mottak/altinn-integrasjon/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/elektronisk-mottak/altinn-integrasjon/">
        <span>Integrasjon via Altinn</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/enhetsregisteret/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/enhetsregisteret/">
        <span>Enhetsregisteret</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/" class="dd-item
        parent
        
        
        ">
      <a href="/docs/apidokumentasjon/losoreregisteret/">
        <span>Løsøreregisteret</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/itu-utt/" class="dd-item
        parent
        
        
        ">
      <a href="/docs/apidokumentasjon/losoreregisteret/itu-utt/">
        <span>Intet til utlegg/utleggstrekk (ITU/UTT)</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/itu-utt/distributor/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/itu-utt/distributor/">
        <span>ITU/UTT for distributører</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/itu-utt/kredittopplysningsforetak/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/itu-utt/kredittopplysningsforetak/">
        <span>ITU/UTT for kredittopplysningsforetak</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/itu-utt/mp-integrasjonsveiledning/" class="dd-item
     active
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/itu-utt/mp-integrasjonsveiledning/">
        <span>Veiledning for integrasjon mot Maskinporten</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/kodeliste/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/losoreregisteret/kodeliste/">
        <span>Kodeliste</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/" class="dd-item
        
        
        
        ">
      <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/">
        <span>Rettsstiftelse</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_generell/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_generell/">
        <span>Generelt - Uthenting av rettsstiftelser</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_kjoretoy/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_kjoretoy/">
        <span>Henting av rettstiftelser knyttet til kjøretøy</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_orgnr/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_orgnr/">
        <span>Henting av rettsstiftelser knyttet til virksomhet</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_fnr/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_fnr/">
        <span>Henting av rettsstiftelser knyttet til person</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_totalbestand/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_totalbestand/">
        <span>Totalbestand</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_endringslogg/" class="dd-item
     
      ">
        <a href="/docs/apidokumentasjon/losoreregisteret/rettsstiftelse/rettsstiftelse_endringslogg/">
        <span>Endringslogg</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/" class="dd-item
        
        
        parent
        ">
      <a href="/docs/informasjonsmodeller/">
        <span>Informasjonsmodeller</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/" class="dd-item
        
        
        
        ">
      <a href="/docs/informasjonsmodeller/enhetsregisteret/">
        <span>Enhetsregisteret</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/enhetsregisteret_omarbeidet/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/enhetsregisteret_omarbeidet/">
        <span>Om arbeidet med forretningsobjektmodeller</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/" class="dd-item
        
        
        
        ">
      <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/">
        <span>Forretningsobjektmodeller</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_sentraleopplysninger/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_sentraleopplysninger/">
        <span>Sentrale opplysninger</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_kontaktinformasjon/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_kontaktinformasjon/">
        <span>Kontaktinformasjon</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_rollerer/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_rollerer/">
        <span>Roller i Enhetsregisteret</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_virksomhetensstatus/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_virksomhetensstatus/">
        <span>Virksomhetens status</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_kontrollansvar/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_kontrollansvar/">
        <span>Kontrollansvar</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_foretaksgruppe/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_foretaksgruppe/">
        <span>Foretaksgruppe</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_strukturoffentligforvaltning/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_strukturoffentligforvaltning/">
        <span>Struktur offentlig forvaltning</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_underenhet/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/forretningsobjektmodeller/enhetsregisteret_underenhet/">
        <span>Underenhet</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="https://brreg.github.io/docs/informasjonsmodeller/enhetsregisteret/enhetsregisteret_begrepforretningsmodeller/" class="dd-item
     
      ">
        <a href="/docs/informasjonsmodeller/enhetsregisteret/enhetsregisteret_begrepforretningsmodeller/">
        <span>Begrep for forretningsmodeller for Enhetsregisteret</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
        

        
        
            
                <li>
                    <h3>Lenker</h3>
                    <a href="https://github.com/brreg/openAPI"><i class='fa fa-fw fa-star'></i> OpenAPI specs (GitHub)</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://github.com/brreg/informasjonsmodeller.git"><i class='fa fa-fw fa-star'></i> Informasjonsmodeller (GitHub)</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://informasjonsforvaltning.github.io/"><i class='fa fa-fw fa-info-circle'></i> Felles datakatalog</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://altinn.github.io/docs/"><i class='fa fa-fw fa-info-circle'></i> Altinn docs</a>
                    
                </li>
            
                <li>
                    
                    <a href="/docs/credits"><i class='fa fa-fw fa-bullhorn'></i> Kred</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://github.com/brreg/docs"><i class='fa fa-fw fa-github'></i> GitHub</a>
                    
                </li>
            
           
        
        

        
    </ul>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/brreg/docs/blob/master/content/apidokumentasjon/losoreregisteret/itu-utt/mp-integrasjonsveiledning.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Endre
              </a>
            </div>
              
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                
                <span class="links">
                  
                  













 <a href='https://brreg.github.io/docs/'>BR docs</a> > <a href='https://brreg.github.io/docs/apidokumentasjon/'>API-dokumentasjon</a> > <a href='https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/'>Løsøreregisteret</a> > <a href='https://brreg.github.io/docs/apidokumentasjon/losoreregisteret/itu-utt/'>Intet til utlegg/utleggstrekk (ITU/UTT)</a> > Veiledning for integrasjon mot Maskinporten










                </span>
            </div>
            
              <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#innledning">Innledning</a></li>
    <li><a href="#opprette-maskinport-integrasjon-oauth2-klient">Opprette Maskinport-integrasjon (oauth2-klient)</a>
      <ul>
        <li><a href="#veiledning-til-bruk-av-selvbetjeningsapi">Veiledning til bruk av selvbetjeningsAPI</a></li>
      </ul>
    </li>
    <li><a href="#hente-access-token">Hente access token</a></li>
  </ul>
</nav>
    </div>
</div>

            
          </div>
        
        
        <div id="body-inner">
          
            
              <h1>Veiledning for integrasjon mot Maskinporten</h1>
            
          




<h2 id="innledning">Innledning</h2>
<p>Tilgang til APIet krever autentisering via <a href="https://docs.digdir.no/maskinporten_guide_apikonsument.html">Maskinporten</a>.</p>
<p>Kort fortalt så må API-konsument initielt opprette en Maskinport-integrasjon (oauth2-klient) og registrere scopet til APIet til denne. Når APIet skal brukes, må denne oauth2-klienten forespørre et token fra Maskinporten og inkludere dette tokenet i kall til APIet.</p>
<p>Det er også blitt opprettet en referanseapplikasjon for å gjøre det enklere se hvordan man skal integrere.
Koden for denne er lagt ut i brreg sitt repository på github: <a href="https://github.com/brreg/refapp-integrasjon">https://github.com/brreg/refapp-integrasjon</a></p>
<p><strong><em>MERK:</em></strong> API-konsument må en ha et gyldig virksomhetssertifikat, enten for et syntetisk organisasjonsnummer (testmiljø), eller for et gyldig organisasjonsnummer (produksjonsmiljø).</p>
<h2 id="opprette-maskinport-integrasjon-oauth2-klient">Opprette Maskinport-integrasjon (oauth2-klient)</h2>
<p>API-konsument trenger en oauth2-klient (også omtalt som klient) for å hente Maskinport-token for aktuelt scope, som må inkluderes i kall til APIet. Se <a href="https://docs.digdir.no/maskinporten_overordnet.html">overordnet arkitekturbeskrivelse</a>.</p>
<p>Integrasjonen/klienten kan opprettes manuelt i <a href="https://minside-samarbeid.digdir.no/organization-home/services/service-admin">Samarbeidsportalen</a> eller via Maskinporten sitt <a href="https://docs.digdir.no/oidc_api_admin_maskinporten.html">selvbetjeningsAPI</a>. Da selvbetjeningsAPIet også er beskyttet av Maskinport-token, må API-konsument ha en egen oauth2-klient, også omtalt som selvbetjeningsklient, for å bruke denne tjenesten. Ta kontakt med <a href="mailto:servicedesk@digdir.no">Digdir sin servicedesk</a> for å få en selvbetjeningsklient.</p>
<p><strong><em>MERK:</em></strong> En klient for et syntetisk organisasjonsnummer (testmiljø) må opprettes via selvbetjeningsAPIet. Selvbetjeningsklienter for API-konsumenter av ITU/UTT-API er allerede opprettet med identifikator <code>oidc_&lt;fiktivt organisasjonsnummer&gt;_api</code>.</p>
<h3 id="veiledning-til-bruk-av-selvbetjeningsapi">Veiledning til bruk av selvbetjeningsAPI</h3>
<p>Dette kapittelet er ment som en veiledning/eksempel på hvordan en Maskinport-integrasjon/klient kan opprettes ved hjelp av selvbetjeningsAPIet.</p>
<p>Ved integrasjon mot produksjonsmiljø, erstatt Maskinport-spesifikke URLer med tilsvarende for prod. Se <a href="https://docs.digdir.no/maskinporten_func_wellknown.html">oversikten over endepunkter hos Maskinporten</a>.</p>
<h4 id="lag-keystore">Lag Keystore</h4>
<p>En keystore av typen JKS som inneholder virksomhetssertifikatet må opprettes, se <a href="https://docs.digdir.no/oidc_sample_jwtgrant_postman.html">Maskinporten</a> for nærmere informasjon.</p>
<p>Dette kan gjøres i UNIX-systemer (Mac/Linux) ved å kjøre kommandoen:</p>
<pre tabindex="0"><code>keytool -v -importkeystore -srckeystore &lt;filnavn&gt; -srcstoretype PKCS12 (om virksomhetssertifikatet er av type .p12) -destkeystore &lt;ønsket-navn-på-keystore&gt; -deststoretype JKS
</code></pre><p>Etter input vil du først lage et passord for keystore, dette trenger du videre. Deretter blir en spurt om passordet til virksomhetssertifikatet. Skriv inn ønsket og gitt passord og keystore vil bli opprettet.</p>
<h4 id="generer-jwt">Generer JWT</h4>
<p>Autentisering via Maskinporten foregår ved hjelp av JWT tokens. Digdir har laget en egen <a href="https://github.com/difi/jwt-grant-generator">JWT-grant-generator</a> som lastes ned og bygges i henhold til dokumentasjonen som finnes på lenken.</p>
<p>For førstegangsregistrering kreves en properties fil når du lager JWT-en med disse parametrene:</p>
<ul>
<li>TEST</li>
</ul>
<pre tabindex="0"><code class="language-properties" data-lang="properties">issuer=&lt;selvbetjeningsklient_id&gt;
audience=https://oidc-ver2.difi.no/idporten-oidc-provider/
scope=idporten:dcr.write idporten:dcr.read
token.endpoint=https://oidc-ver2.difi.no/idporten-oidc-provider/token
</code></pre><ul>
<li>PROD</li>
</ul>
<pre tabindex="0"><code class="language-properties" data-lang="properties">issuer=&lt;selvbetjeningsklient_id&gt;
audience=https://oidc.difi.no/idporten-oidc-provider/
scope=idporten:dcr.write idporten:dcr.read
token.endpoint=https://oidc.difi.no/idporten-oidc-provider/token
</code></pre><p>I tillegg kommer <a href="https://github.com/difi/jwt-grant-generator">keystore spesifikke properties, som er beskrevet her</a>.</p>
<p>Når properties filen er ferdig laget, kan en følge retningslinjene nederst i lenken over for å genere en JWT og få ut <code>access_token</code> fra Maskinporten.
Dette access tokenet blir brukt for å registrere en vedvarende klient hos Maskinporten.</p>
<h4 id="registrer-klient">Registrer klient</h4>
<p>Send en POST-request til følgende URL for å registrere ny klient:</p>
<ul>
<li>TEST: <code>https://integrasjon-ver2.difi.no/clients/</code></li>
<li>PRODUKSJON: <code>https://integrasjon.difi.no/clients/</code></li>
</ul>
<p>Se <a href="https://docs.digdir.no/maskinporten_guide_apikonsument.html#registrere-klient-som-bruker-virksomhetssertifikat">Registrere klient som bruker virksomhetssertifikat</a> for nærmere informasjon.</p>
<p>Bruk access token fra forrige steg. Klienten skal registreres for aktuelt scope, f.eks. <code>brreg:losore/utlegg</code>. Se dokumentasjon av APIene for informasjon om hvilket scope som skal brukes.</p>
<p>Maskinporten vil svare med en <code>client_id</code>.</p>
<h2 id="hente-access-token">Hente access token</h2>
<p><strong><em>MERK</em></strong> Dette steget forutsetter at en klient allerede er opprettet med aktuelt scope.</p>
<p>Opprett en <a href="https://docs.digdir.no/maskinporten_guide_apikonsument.html#5-be-om-token">properties fil med felter som beskrevet her</a>.</p>
<p>Flere av feltene vil JWT-grant-generator skape automatisk om denne brukes. Ved bruk av JWT-grant-generator, opprett en properties fil med feltene beskrevet i seksjonen for å generere JWT, med følgende endringer:</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">issuer=&lt;client_id&gt;
scope=&lt;scope for API&gt;
</code></pre><p>Scope kan f.eks. være <code>brreg:losore/utlegg</code>. Se dokumentasjon av APIene for informasjon om hvilket scope som skal brukes.</p>
<p>Ved kjøring av JWT-grant-generatoren vil en få ut et access token som kan brukes mot våre APIer.</p>


<footer class=" footline" >
	
</footer>



      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/docs/apidokumentasjon/losoreregisteret/itu-utt/kredittopplysningsforetak/" title="ITU/UTT for kredittopplysningsforetak"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/docs/apidokumentasjon/losoreregisteret/kodeliste/" title="Kodeliste" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js"></script>
    <script src="/docs/js/featherlight.min.js"></script>
    <script src="/docs/js/html5shiv-printshiv.min.js"></script>
    <script src="/docs/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom.71422.js"></script>
    <script src="/docs/js/learn.js"></script>
    <script src="/docs/js/hugo-learn.js"></script>

    
    <link href="/docs/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/docs/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>

